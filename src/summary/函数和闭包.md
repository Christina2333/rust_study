#### 闭包：可以捕获环境的匿名函数 cp13
闭包：可以保存进变量或作为参数传递给其他函数的匿名函数，同时可以获取调用者作用域中的值（函数不可以获取调用者作用域的变量）。

环境：闭包周围的作用域。

所有的闭包都实现了Fn、FnMut、FnOnce中的一个。
（1）Fn：从其环境获取不可变的借用值（默认是这种）
（2）FnMut：从其环境获取可变借用值，以便改变其环境中的值
（3）FnOnce：消费从环境中捕获的变量。为了消费该变量，必须获取变量的所有权并在定义闭包时将其移动进闭包（使用move关键字），
因为变量所有权消费后就没有了，因此该闭包只能执行一次。

#### 高级函数和闭包 cp19

##### 函数指针
向函数传递闭包：因为闭包可以保存进变量，因此只需要传递变量即可。
向函数传递函数：使用函数指针 fn
`
fn do_twice(f: fn(i32) -> i32, arg: i32) -> i32 {
    f(arg) + f(arg)
}
`
fn是一个类型，闭包（Fn）是一个trait。

方法仅接收函数作为入参：在调用C函数的场景，入参为类型指定为fn，如上述例子所示。
方法仅接收函数和闭包作为入参：Iterator.map()方法，其入参为FnMut(Self::Item)

##### 返回值闭包
无法直接返回闭包或者函数，因为rust并不知道用多少空间来存储，因此需要通过Box<dyn xxx>来存储。
例如：下面直接返回闭包作为返回值编译会报错
`
fn returns_closure() -> Fn(i32) -> i32 {
    |x| x + 1
}
`
需要改为
`
fn returns_closure() -> Box<dyn Fn(i32) -> i32> {
    Box::new(|x| x + 1)
}
`
实际上就是返回一个trait对象。